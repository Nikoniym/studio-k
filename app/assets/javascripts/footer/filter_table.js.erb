$(document).ready(function (){
  $(".timetable .content_wrapper table").rowspanizer({ vertical_align: 'middle'});
  <%@y=''%>
  <% select = TrainingName.pluck(:name_shot).uniq %>
  <% count = select.count %>
  <% select.each_with_index  do |key, index|%>
     <%if index == count-1%>
       <% @y +=".#{key}"%>
     <%else%>
       <% @y +=".#{key}, "%>
     <%end%>
  <% end%>

  $('.page_timetable').find("<%= @y%>").css('display','none');
  <% select.each_with_index do |key, index|%>
    <%@z=''%>
    <%tr = Array.new(select)%>
    <%tr.delete_at(index)%>
    <% tr.each do |t|%>
      <% @z +="tr.#{t}, "%>
    <%end%>
    $(".page_timetable.<%= key%>").find("<%= @z%> td:nth-child(2)").remove();
    $('.page_timetable.<%= key%>').find('.<%= key%>').fadeIn(0);
  <%end%>
  $('.page_timetable table').rowspanizer({ vertical_align: 'middle'});
});